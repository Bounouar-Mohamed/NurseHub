@tailwind base;
@tailwind components;
@tailwind utilities;

/* --------------------------------------------------
   Design tokens (colors, radii)
---------------------------------------------------*/
@layer base {
  :root {
    /* Light Mode Colors */
    --background: 0 0% 95%; /* #ffffff */
    --foreground: 222.2 84% 4.9%; /* #0c0d21 */

    --muted: 210 40% 96.1%; /* #f1f5f9 */
    --muted-foreground: 215.4 16.3% 46.9%; /* #64748b */
    --muted-foreground-light: 215.4 16.3% 46.9% / 0.5;
    --muted-foreground-dark: 215.4 16.3% 46.9% / 0.6;

    --card: 0 0% 100%; /* #ffffff */
    --card-foreground: 222.2 84% 4.9%; /* #0c0d21 */

    --popover: 0 0% 100%; /* #ffffff */
    --popover-foreground: 222.2 84% 4.9%; /* #0c0d21 */

    /* Primary Accent Colors */
    --primary: 165 96% 71%; /* #78fcd6 */
    --primary-foreground: 160 8% 6%; /* #0d0f0e */
    --primary-dark: 160 100% 50%; /* #00ffb6 */
    --primary-light: 160 48% 87%; /* #d1f8eb */

    /* Secondary */
    --secondary: 222.2 47.4% 11.2%; /* #111827 */
    --secondary-foreground: 210 40% 98%; /* #f8fafc */

    --accent: 210 40% 96.1%; /* #f1f5f9 */
    --accent-foreground: 222.2 47.4% 11.2%; /* #111827 */

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 214.3 31.8% 91.4%; /* #e2e8f0 */
    --border-light: 214.3 31.8% 91.4% / 0.1;
    --border-dark: 214.3 31.8% 91.4% / 0.05;

    --input: 214.3 31.8% 91.4%; /* #e2e8f0 */
    --ring: 222.2 84% 4.9%;

    --radius: 0.5rem;
  }
}

/* --------------------------------------------------
   Base reset (SAFE for fixed/portals)
---------------------------------------------------*/
@layer base {
  * { @apply border-border; }

  html {
    @apply scroll-smooth;                    /* smooth scroll */
    -webkit-overflow-scrolling: touch;       /* iOS momentum */
    height: 100%;
    /* ❗ Pas de transform/perspective ici (casse position:fixed) */
  }

  body {
    @apply bg-background text-foreground;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    overflow-x: hidden;
    max-width: 100vw;
    min-height: 100%;
    /* ❗ Pas de transform/backface/will-change globaux ici */
  }
}

/* --------------------------------------------------
   Scrollbar policy (global hide kept as in original)
   👉 Si tu veux les garder visibles, commente ces règles
---------------------------------------------------*/
/* Chrome, Safari, Opera */
::-webkit-scrollbar { width: 0; height: 0; background: transparent; }
body::-webkit-scrollbar { display: none; }
/* Firefox + Edge legacy */
body { scrollbar-width: none; -ms-overflow-style: none; }

/* --------------------------------------------------
   Anim helpers (SAFE)
---------------------------------------------------*/
.fade-in-section {
  opacity: 0;
  transform: translate3d(0, 20px, 0);
  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: opacity, transform;
}
.fade-in-section.is-visible {
  opacity: 1;
  transform: translate3d(0, 0, 0);
}
.stagger-1 { transition-delay: 0.03s; }
.stagger-2 { transition-delay: 0.06s; }
.stagger-3 { transition-delay: 0.09s; }

/* --------------------------------------------------
   GPU hint (opt-in only on small, isolated elements)
   ❗ Ne JAMAIS appliquer à html, body, header, main, nav, layout wrappers
---------------------------------------------------*/
.gpu-accelerated {
  /* On évite transform/backface global qui créent des containing blocks */
  will-change: transform;
}

/* --------------------------------------------------
   Media defaults (SAFE)
---------------------------------------------------*/
img, picture, video, canvas, svg {
  display: block;
  max-width: 100%;
  /* Pas de transform global ici */
}

/* Next Image wrapper helper */
.next-image-wrapper { position: relative; overflow: hidden; }

/* Keep original quality tweaks */
img[src*="/images/"] {
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
}

/* Cards & SVG in Bento (no global transforms) */
.bento-card-stable { /* contenu volontairement minimal et SAFE */ }
.bento-card-stable svg { /* idem */ }

/* Optional utility to remove scrollbars on any container */
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

/* --------------------------------------------------
   Notes d’implémentation fixes/portals
   - Les drawers/modals doivent être portalisés → document.body ou #modal-root
   - Donne-leur position: fixed + z-index > navbar
   - Utilise h-[100svh]/[100dvh] + overflow-y-auto à l’intérieur du panneau
---------------------------------------------------*/
